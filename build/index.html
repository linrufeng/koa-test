<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/index.css">
    <title>静态资源托管例子</title>
</head>
<body>
    <h2>koa2 学习例子介绍</h2>
    <ul>
        <li><a href="#">打印hello world</a></li>
        <li><a href="">new koa()</a></li>
        <li><a href="">use()函数</a></li>
        <li><a href="">koa 中 async 的作用</a></li>
        <li><a href="#">托管静态资源</a></li> 
        <li><a href="#">路由 koa-router几种写法(3种)</a></li>      
        <li><a href="#">ctx.request</a></li>
        <li><a href="#">ctx.response 重定向功能</a></li>
        <li><a href="#">middlewares 中间件 中间件栈的执行顺序</a></li>
        <li><a href="#">中间件 koa-compose 使用</a></li>        
        <li><a href="#"> 错误监听</a></li>
        <li><a href="#">cookie 获取 和注入</a></li>
        <li><a href="">koa-body 上传文件</a></li>
        <li><a href="#">链接数据库</a></li>
        <li><a href="#">读取数据库内容</a></li>
        <li><a href="#">添加数据库内容</a></li>
       
    </ul>
   这里是托管的一个静态页面，我可以在这里写引用 托管 build下的各种资源
   <h2>路由测试</h2>
   <button id="test1">Get:test1</button> <button id="test2">Get:test2</button>
   <button id="test3">Get:/</button>
   <h4>表单</h4>
   <form action="#">
       姓名 ：<input type="text" name="name">
       <input type="file" id="upfile" name="">
       <button id="test5">POST:test5</button>
   </form>
  
</body>
<script src="./js/jq.js"></script>
<script src="./js/app.js"></script>
<script>
$(function(){
    $('#test1').bind('click',function(){
        $.ajax({
            url:'/test1',
            type:"get"
        }).done(res=>{
            console.log(res)
        })
    })
    $('#test2').bind('click',function(){
        $.ajax({
            url:'/test2',
            type:"get",
            data:{
                name:'李林森'
            }
        }).done(res=>{
            console.log(res)
        })
    })
    $('#test3').bind('click',function(){
        $.ajax({
            url:'/',
            type:"get",
            data:{
                name:'李林森'
            }
        }).done(res=>{
            console.log(res)
        })
    })
    $("#test5").bind('click',function(){
        //传文件比较特殊，其内容是二进制数据，而HTTP提供的是基于文本的通信协议。 这时需要采用multipart/form-data编码的HTTP表单。
         var data = new FormData();

        // console.log(formData)
        var files = $("#upfile").prop('files');
         data.append('name', files[0]);
        console.log( data)
        $.ajax({
        url: '/test5',
        type: 'POST',
        data: data,
        cache: false,
        processData: false,
        contentType: false
        }).done(res=>{
            console.log(res)
        })
        return false;
    })
})
</script>
</html>